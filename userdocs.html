<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Getting Started With LunaSim</title>
  <link href="https://fonts.googleapis.com/css2?family=Mona+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Mona Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: white;
      color: #333;
      line-height: 1.6;
      overflow-x: hidden;
    }

    .container {
      display: flex;
      min-height: 100vh;
      width: 100vw;
    }

    .sidebar {
      width: 32%;
      background: #66b3a4;
      padding: 0;
      position: fixed;
      height: calc(100vh - 6vh);
      margin-top: 3vh;
      margin-bottom: 3vh;
      margin-left: 1rem;
      overflow-y: auto;
      border-radius: 15px;
      z-index: 100;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    .sidebar-content {
      padding: 2rem 1.5rem;
    }

    .sidebar h2 {
      color: white;
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 1.5rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid rgba(255, 255, 255, 0.2);
    }

    .toc {
      list-style: none;
    }

    .toc-item {
      margin-bottom: 0.5rem;
    }

    .toc-link {
      color: white;
      text-decoration: none;
      display: block;
      padding: 0.5rem 0.75rem;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 400;
      transition: all 0.2s ease;
      border-left: 3px solid transparent;
    }

    .toc-link:hover {
      background: rgba(255, 255, 255, 0.1);
      transform: translateX(4px);
    }

    .toc-link.active {
      background: rgba(255, 255, 255, 0.15);
      font-weight: 600;
      border-left: 3px solid white;
    }

    .toc-link.sub {
      margin-left: 1rem;
      font-size: 13px;
      opacity: 0.9;
    }

    .main-content {
      margin-left: 25%;
      width: 75%;
      padding: 2rem 3rem;
      min-height: 100vh;
    }

    .content-wrapper {
      max-width: 800px;
      margin: 0 auto;
    }

    .title {
      font-size: 32px;
      color: black;
      font-weight: 700;
      margin-bottom: 2rem;
      line-height: 1.2;
    }

    h1 {
      font-size: 27px;
      color: black;
      font-weight: 600;
      margin: 2rem 0 1rem 0;
      padding-top: 1rem;
      scroll-margin-top: 2rem;
    }

    h2 {
      font-size: 25px;
      color: #66b3a4;
      font-weight: 600;
      margin: 1.5rem 0 1rem 0;
      scroll-margin-top: 2rem;
    }

    h3 {
      font-size: 20px;
      color: #385e91;
      font-weight: 600;
      margin: 1.5rem 0 0.75rem 0;
      scroll-margin-top: 2rem;
    }

    /* Make the main title much bigger than h1 */
    .main-title {
      font-size: 2.8rem;
      font-weight: 900;
      color: #385e91;
      margin: 0;
      line-height: 1.1;
    }

    .section {
      border: 2px solid #385e91;
      border-radius: 18px;
      padding: 0.5rem 2rem;
      /* top/bottom 1.5rem, left/right 2rem */
      margin-bottom: 2.5rem;
      background: white;
      box-sizing: border-box;
    }

    .title-with-icon img {
      height: 3rem;
      width: auto;
      margin-right: 0.75rem;
      vertical-align: middle;
    }

    .model-display {
      color: #ff0000;
    }

    .equation-editor {
      color: #ffab40;
    }

    .simulation-parameters {
      color: #9900ff;
    }

    /* bright yellow */
    .tabs {
      color: #04b204;
    }

    .action-tabs {
      color: #03cfcf;
    }

    /* blue */
    .toolkit {
      color: #ffcb00;
    }

    /* new styles for h3 with image and dt heading without image */
    .title-with-icon {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 1.5rem;
    }

    .title-with-icon h3 {
      margin: 0;
      font-size: 14px;
      font-weight: 600;
      color: #385e91;
    }

    .title-with-icon img {
      height: 2.8rem;
      width: auto;
      margin-right: 0.75rem;
      vertical-align: middle;
    }

    p {
      font-size: 17px;
      color: #385e91;
      margin-bottom: 1rem;
      line-height: 1.6;
    }

    ul,
    ol {
      margin: 1rem 0;
      padding-left: 1.5rem;
    }

    li {
      font-size: 11px;
      color: #385e91;
      margin-bottom: 0.5rem;
    }

    img {
      max-width: 100%;
      height: auto;
      margin: 1rem 0;
      border-radius: 8px;
      box-shadow: none;
    }

    .center {
      text-align: center;
    }

    code {
      background: #f5f5f5;
      padding: 0.2rem 0.4rem;
      border-radius: 4px;
      font-family: 'Roboto Mono', monospace;
      font-size: 15px;
      color: #385e91;
    }

    .section {
      scroll-margin-top: 2rem;
    }

    @media (max-width: 1024px) {
      .sidebar {
        width: 30%;
      }

      .main-content {
        margin-left: 30%;
        width: 70%;
      }
    }

    @media (max-width: 768px) {
      .sidebar {
        width: 100%;
        height: auto;
        position: relative;
        margin: 0;
        border-radius: 0;
      }

      .main-content {
        margin-left: 0;
        width: 100%;
        padding: 1.5rem;
      }
    }

 .ghosting-flex {
  display: flex;
  align-items: center;   /* Vertically center text with image */
  gap: 1.5rem;
}

.ghosting-img {
  height: 18.5rem;        /* Set to your preferred image height */
  width: auto;
  margin: 0;
  flex-shrink: 0;
}

.ghosting-flex p {
  margin: 0;
  font-size: 17px;
  color: #385e91;
  line-height: 1.6;
}

.section iframe {
  display: block;
  margin-left: auto;
  margin-right: auto; 
  margin-top: 1rem;
  margin-bottom: 1rem;
  max-width: 100%;
}



.theme-grid img:hover {
  transform: scale(1.06);
  box-shadow: 0 4px 16px rgba(60,90,130,0.13);
}

.theme-grid-2x2 {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1.2rem; /* adjust as needed */
  justify-items: center;
  align-items: center;
  max-width: 700px;
  margin: 3rem auto;
}

.theme-grid-2x2 img {
  width: 100%;
  max-width: 320px;
  height: 120px;           /* rectangle: less tall than wide */
  object-fit: contain;
  border-radius: 0;
  box-shadow: none;
  background: none;
  display: block;
  transition: transform 0.15s;
}

.theme-grid-2x2 img:hover {
  transform: scale(1.06);
  box-shadow: 0 4px 16px rgba(60,90,130,0.13);
}

.video-population-section,
.freefall-section,
.spring-section,
.water-tank-section {
  font-size: 17px;
}

.video-population-section code,
.freefall-section code,
.spring-section code,
.water-tank-section code {
  font-size: 14px;
  padding: 0.15rem 0.35rem;
}

.video-population-section li,
.freefall-section li,
.spring-section li,
.water-tank-section li {
  font-size: 16px;
}

.video-population-section h4,
.freefall-section h4,
.spring-section h4,
.water-tank-section h4 {
  font-size: 18px;
}

.video-population-section iframe,
.freefall-section iframe,
.spring-section iframe,
.water-tank-section iframe {
  margin-bottom: 2.2rem;
}

.video-population-section > p:first-of-type,
.freefall-section > p:first-of-type,
.spring-section > p:first-of-type,
.water-tank-section > p:first-of-type {
  margin-bottom: 2.2rem;
}

.section h2 code {
  font-size: 20px;
  font-family: 'Roboto Mono', monospace;
  color: #385e91;
  background: #f5f5f5;
  padding: 0.2rem 0.4rem;
  border-radius: 4px;
}

    /* Make image5.png, image21.png, and image22.png smaller */
    img[src$="image5.png"],
    img[src$="image20.png"] {
      height: 1.1rem;
      width: auto;
      box-shadow: none;
      margin: 0 0.5rem 0 0;
      border-radius: 4px;
    }

    img[src$="image3.png"] {
      height: 1.3rem;
      width: auto;
      box-shadow: none;
      margin: 0 0.5rem 0 0;
      border-radius: 4px;
    }

    img[src$="image21.png"],
    img[src$="image22.png"] {
      height: 0.5rem;
      width: auto;
      box-shadow: none;
      margin: 0 0.5rem 0 0;
      border-radius: 4px;
    }

    .theme-item {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.theme-caption {
  font-size: 14px;
  color: #385e91;
  margin-top: 0.5rem;
  text-align: center;
}
  </style>
</head>

<body>
  <div class="container">
    <nav class="sidebar">
      <div class="sidebar-content">
        <h2>Table of Contents</h2>
        <ul class="toc">
          <li class="toc-item">
            <a href="#what-is-lunasim" class="toc-link">What is LunaSim?</a>
          </li>
          <li class="toc-item">
            <a href="#key-terms" class="toc-link">Key Terms</a>
          </li>
          <li class="toc-item">
            <a href="#key-terms" class="toc-link sub">Stock</a>
          </li>
          <li class="toc-item">
            <a href="#key-terms" class="toc-link sub">Cloud</a>
          </li>
          <li class="toc-item">
            <a href="#key-terms" class="toc-link sub">Flow</a>
          </li>
          <li class="toc-item">
            <a href="#key-terms" class="toc-link sub">Variable</a>
          </li>
          <li class="toc-item">
            <a href="#key-terms" class="toc-link sub">Influence</a>
          </li>
          <li class="toc-item">
            <a href="#key-terms" class="toc-link sub">dt (Δt)</a>
          </li>
          <li class="toc-item">
            <a href="#parts-of-website" class="toc-link">Parts of the Website</a>
          </li>
          <li class="toc-item">
            <a href="#parts-of-website" class="toc-link sub">Model Display</a>
          </li>
          <li class="toc-item">
            <a href="#parts-of-website" class="toc-link sub">Equation Editor</a>
          </li>
          <li class="toc-item">
            <a href="#parts-of-website" class="toc-link sub">Simulation Parameters</a>
          </li>
          <li class="toc-item">
            <a href="#parts-of-website" class="toc-link sub">Tabs</a>
          </li>
          <li class="toc-item">
            <a href="#parts-of-website" class="toc-link sub">Action Tabs</a>
          </li>
          <li class="toc-item">
            <a href="#parts-of-website" class="toc-link sub">Toolkit</a>
          </li>
          <li class="toc-item">
            <a href="#nodes-vs-links" class="toc-link">Nodes vs. Links</a>
          </li>
          <li class="toc-item">
            <a href="#nodes-vs-links" class="toc-link sub">Nodes</a>
          </li>
          <li class="toc-item">
            <a href="#nodes-vs-links" class="toc-link sub">Links</a>
          </li>
          <li class="toc-item">
            <a href="#editing-equations" class="toc-link">Editing Equations</a>
          </li>
          <li class="toc-item">
            <a href="#ghosting" class="toc-link">Ghosting</a>
          </li>
          <li class="toc-item">
            <a href="#themes" class="toc-link">Themes</a>
          </li>
          <li class="toc-item">
            <a href="#creating-chart" class="toc-link">Creating a Chart</a>
          </li>
          <li class="toc-item">
            <a href="#creating-tables" class="toc-link">Creating Tables</a>
          </li>
          <li class="toc-item">
            <a href="#importing-exporting" class="toc-link">Importing and Exporting</a>
          </li>
          <li class="toc-item">
            <a href="#video-tutorials" class="toc-link">Video Tutorials</a>
          </li>
          <li class="toc-item">
            <a href="#video-intro" class="toc-link sub">Introduction to LunaSim</a>
          </li>
          <li class="toc-item">
            <a href="#video-population" class="toc-link sub">Modeling Population Growth with System Dynamics</a>
          </li>
          <li class="toc-item">
            <a href="#video-freefall" class="toc-link sub">Simulating Freefall with Air Resistance</a>
          </li>
          <li class="toc-item">
            <a href="#video-spring" class="toc-link sub">Spring Motion and Modeling Oscillations</a>
          </li>
          <li class="toc-item">
            <a href="#video-tank" class="toc-link sub">Modeling a Conical Water Tank with Rain, Flow, and Evaporation</a>
          </li>
          <li class="toc-item">
  <a href="#lesson-plans" class="toc-link">Lesson Plans</a>
</li>
        </ul>
      </div>
    </nav>
    <main class="main-content">
      <div class="content-wrapper">
        <div class="title-with-icon">
          <img src="images/userdocs/userdocs/image16.png" alt="LunaSim icon">
          <h1 class="main-title">Getting Started with LunaSim</h1>
        </div>
        <div style="height: 2.5rem;"></div>
        <section id="what-is-lunasim" class="section">
          <h1>What is LunaSim?</h1>
          <p>LunaSim is a visual browser-based modeling platform designed to help users simulate dynamic systems, from motion and
            energy transfer to changes in population or values over time. Instead of requiring coding knowledge, LunaSim
            uses an intuitive interface where models are built using elements like stocks, flows, variables, and
            influences, which you’ll learn a lot more about after reading this guide. This approach allows you to focus
            on the logic and behavior of a system, rather than syntax or programming structure. LunaSim, which is based
            on the concepts of system dynamics, provides us with an effective way of exploring how systems change and
            adapt. Variables and influences define the relationships between various components, stocks represent
            accumulations, and flows control movement. These abstract concepts are brought to life by LunaSim in a
            clear, observable format that is simple to work with.</p>
          </section>

        <section id="key-terms" class="section">
          <h1>Key Terms:</h1>
          <div class="title-with-icon">
            <h3>Stock</h3>
            <img src="images/userdocs/userdocs/image20.png" alt="Stock icon">
          </div>
          <p>A quantity that builds up or decreases (like position, energy, or money)</p>

          <div class="title-with-icon">
            <h3>Cloud</h3>
            <img src="images/userdocs/image3.png" alt="Cloud icon">
          </div>
          <p>A placeholder that represents the start or end of a flow when the source or destination isn't defined (like
            water
            entering from rainfall, energy leaving a system) </p>

          <div class="title-with-icon">
            <h3>Flow</h3>
            <img src="images/userdocs/image21.png" alt="Flow icon">
          </div>
          <p>A rate that adds to or removes from a stock (like velocity, power, or income)</p>

          <div class="title-with-icon">
            <h3>Variable</h3>
            <img src="images/userdocs/image5.png" alt="Variable icon">
          </div>
          <p>A value used to define equations (like mass, time, or force)</p>

          <div class="title-with-icon">
            <h3>Influence</h3>
            <img src="images/userdocs/image22.png" alt="Influence icon">
          </div>
          <p>An arrow showing that one element affects another (like temperature influencing the rate of ice melting)
          </p>
          <div class="title-with-icon">
            <h3>dt (Δt)</h3>
          </div>
          <p>The simulation step size; smaller values equal more precision</p>

        </section>

        <section id="nodes-vs-links" class="section">
          <h1>Nodes vs. Links</h1>

          <h3>Nodes</h3>
          <p>Nodes are the main elements of your model; they represent things that change or hold values, like position,
            velocity, or mass. To add a node, select the type of node you want from the toolbar, click on the model area
            and click the default label to rename it.</p>

          <div class="center">
            <img src="images/userdocs/image23.png" alt="Node Examples" style="width: 100%; max-width: 367px;">
          </div>

          <h3>Links</h3>
          <p>Links connect these nodes and show how they interact. You can create links by clicking on one node and
            dragging it to another. There are two main types: flows and influences. Flows connect stocks and clouds
            (like stock-to-stock or stock-to-cloud), while influences connect variables, flows, and stocks in different
            combinations (such as variable-to-flow or stock-to-variable). You can also rename links by clicking their
            labels to keep your model clear and organized.</p>

          <div class="center">
            <img src="images/userdocs/image24.png" alt="Link Examples" style="width: 100%; max-width: 367px;">
          </div>
        </section>

        <section id="parts-of-website" class="section">
          <h1>Parts of the Website</h1>

          <div class="center">
            <img src="images/userdocs/image17.png" alt="LunaSim Interface Overview" style="width: 100%; max-width: 624px;">
          </div>


          <h3 class="model-display">Model Display</h3>
          <p>This is where you visually build your system. Drag and place nodes like stocks, variables, and clouds, then
            connect them with links to define relationships. It's the central workspace where your entire model takes
            shape.</p>

          <h3 class="equation-editor">Equation Editor</h3>
          <p>
            The equation editor lets you define how nodes interact by writing the equations that drive your model. Each
            variable,
            flow, or stock can have an equation. A deeper breakdown of how to use it effectively will be covered <a
              href="#editing-equations" style="text-decoration: underline;">here</a>.

          <h3 class="toolkit">Toolkit</h3>
          <p>Includes pointer, stock, cloud, variable, influence, and flow tools. Each tool can be selected by pressing its first
            letter (e.g., p for pointer) or by clicking on the tool directly. In addition, there are undo and redo buttons (Ctrl+Z
            and Ctrl+Y) to help you fix mistakes, a center button to recenter your model on the canvas, a select tool (d key) for
            selecting multiple elements at once, and an image button to export your model as a PNG instead of a <code>.luna</code> file (which
            is explained in more detail <a
              href="#importing-exporting" style="text-decoration: underline;">here</a>.) You’ll also find a themes button to switch between four different modes, which is
            covered further <a
              href="#themes" style="text-decoration: underline;">here</a>.</p>
          </p>
        

          <h3 class="tabs">Tabs</h3>
          <p>Switch between "model view" for building and "charts/tables" for analyzing output. In the charts/tables
            section, you can adjust the x- and y-axes to visualize how values change over time or compare variables.</p>

          

          <h3 class="action-tabs">Action Tabs</h3>
          <ul>
            <li>Run starts the simulation</li>
            <li>Load imports existing .luna files</li>
            <li>Export saves your model to share or reuse</li>
            <li>Documentation opens four dropdowns:
              <ul>
                <li>Basics & Video Tutorials → this document</li>
                <li>Lesson Plan → sample curriculum for teaching physics/computer science</li>
                <li>API → how to control or extend LunaSim with code</li>
              </ul>
            </li>
            <li>Clear resets the entire model canvas</li>
          </ul>

          <div class="center">
            <img src="images/userdocs/image25.png" alt="LunaSim Interface Overview" style="width: 100%; max-width: 624px;">
          </div>
          
          <h3 class="simulation-parameters">Simulation Parameters</h3>
          <p>The simulation parameters control how the simulation runs. You can set the start and end time, the time
            step (dt), and the integration method. Use Euler for simpler or faster simulations, and Runge-Kutta 4 (RK4)
            for higher accuracy, especially when systems change quickly.</p>
          
          
        </section>


        <section id="editing-equations" class="section">
          <h1>Editing Equations</h1>

          <p>The equation editor allows users to define relationships between system elements using mathematical
            expressions. Users can enter basic arithmetic operations like addition, subtraction, multiplication, and
            division, (<code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>) or use more advanced Java Math
            functions like <code>abs()</code>, <code>cos()</code>, <code>sqrt()</code>, <code>pow()</code>, or
            <code>max()</code>. To reference the value of another element (like a stock or flow), place the entity's
            label in brackets; for example, <code>[Stock 1]</code>, as long as it is linked to the equation. Stocks and
            flows also feature checkboxes: checking a stock prevents it from going negative, and checking a biflow
            restricts it to a single direction. The editor includes features like hinting, autocomplete, and influence
            validation, which checks that all variables and functions used in an equation are defined and linked
            correctly within the system.</p>
        </section>

        <section id="ghosting" class="section">
          <h1>Ghosting</h1>

          <div class="ghosting-flex">
            <img src="images/userdocs/image7.png" alt="Ghosting Example" class="ghosting-img">
            <p>The equation editor supports ghosting, which allows users to duplicate components like stocks, flows, or
              variables
              in different locations while keeping them functionally linked in the equation. To create a ghost, rename
              the element
              so that it begins with a '$'. All ghosts with the same name will behave as a single component in
              calculations, which
              is especially useful for organizing complex models without losing logical connections.</p>
          </div>
        </section>

        <section id="themes" class="section">
          <h1>Themes</h1>
          <p>
            LunaSim offers four visual themes to suit your preferences: Teal (the default), Indigo, Grey, and Green. You can
            easily switch between them by clicking the palette icon in the toolkit, located right next to the export as image
            button. If you’re unsure where to find these tools or how to use them, check out <a href="#parts-of-website">this section</a> for a quick guide to
            navigating the LunaSim toolkit.
          </p>
          <div class="theme-grid-2x2">
  <div class="theme-item">
    <img src="images/userdocs/theme1.png" alt="Light Theme">
    <span class="theme-caption">Classic Turquoise</span>
  </div>
  <div class="theme-item">
    <img src="images/userdocs/theme2.png" alt="Dark Theme">
    <span class="theme-caption">Moonlight Grey</span>
  </div>
  <div class="theme-item">
    <img src="images/userdocs/theme3.png" alt="Blue Theme">
    <span class="theme-caption">Forest Green</span>
  </div>
  <div class="theme-item">
    <img src="images/userdocs/theme4.png" alt="High Contrast Theme">
    <span class="theme-caption">Galaxy Purple</span>
  </div>
</div>
        </section>

        <section id="creating-chart" class="section">
          <h1>Creating a Chart</h1>

          <p>Step 1: To begin creating a table, first create and then run a model, and you will be automatically transported to the Charts/Tables tab.
          </p>

          <div class="center">
            <img src="images/userdocs/image11.png" alt="Charts/Tables Tab" style="width: 100%; max-width: 624px;">
          </div>

          <p>Step 2: A default plot shows the values of all of the stocks in
            your model over time. If you want to create your own chart or table, click on the green plus button at the top.</p>

          <div class="center">
            <img src="images/userdocs/image10.png" alt="Green Plus Button" style="width: 100%; max-width: 608px;">
          </div>

          <p>Step 3: Select the 'Chart' option and the x-axis you want to use.</p>

          <div class="center">
            <img src="images/userdocs/image2.png" alt="Chart Option Selection" style="width: 100%; max-width: 610px;">
          </div>

          <p>Step 4: Scroll down and select as many nodes as you want to use for the y-axis. After you're done, click
            the yellow new tab button.</p>

          <div class="center">
            <img src="images/userdocs/image15.png" alt="Node Selection" style="width: 100%; max-width: 606px;">
          </div>

          <p>Step 5: Your chart will be created and stored in a new tab. To access your new chart, click on the new tab
            at the top.</p>

          <div class="center">
            <img src="images/userdocs/image8.png" alt="New Chart Tab" style="width: 100%; max-width: 608px;">
          </div>

          <p>Step 6: If you want to read the value of a node at a specific time, you can just hover over the point.</p>

          <div class="center">
            <img src="images/userdocs/image18.png" alt="Hovering Over Chart Point" style="width: 100%; max-width: 606px;">
          </div>

          <p>Congratulations! You just created a chart in LunaSim. Charts can help visualize how values like stocks,
            flows, and variables change over time, making it easier to compare nodes, analyze patterns, trends, and
            system behavior.</p>
        </section>

        <section id="creating-tables" class="section">
          <h1>Creating Tables</h1>

          <p>Step 1: To begin creating a table, first create and then run a model, and you will be automatically transported to the Charts/Tables tab.
          </p>

          <div class="center">
            <img src="images/userdocs/image11.png" alt="Charts/Tables Tab" style="width: 100%; max-width: 624px;">
          </div>

          <p>Step 2: A default plot shows the values of all of the stocks in
            your model over time. If you want to create your own chart or table, click on the green plus button at the
            top.</p>

          <div class="center">
            <img src="images/userdocs/image10.png" alt="Green Plus Button" style="width: 100%; max-width: 608px;">
          </div>

          <p>Step 3: Select the 'Table' option and time as your x-axis, because time should always be the leftmost
            column.</p>

          <div class="center">
            <img src="images/userdocs/image9.png" alt="Table Option Selection" style="width: 100%; max-width: 624px;">
          </div>

          <p>Step 4: Scroll down and select as many nodes as you want to use for the y-axis. After you're done, click
            the yellow new tab button.</p>

          <div class="center">
            <img src="images/userdocs/image15.png" alt="Node Selection" style="width: 100%; max-width: 606px;">
          </div>

          <p>Step 5: Your table will be created and stored in a new tab. To access your new table, click on the new tab
            at the top.</p>

          <div class="center">
            <img src="images/userdocs/image6.png" alt="New Table Tab" style="width: 100%; max-width: 624px;">
          </div>

          <p>Congratulations! You just created a table in LunaSim. Tables display the numerical values of nodes like
            stocks, flows, and variables at each point in time, helping you precisely track system behavior and compare
            values across different components.</p>
        </section>

        <section id="importing-exporting" class="section">
          <h1>Importing and Exporting</h1>

          <h2>To import a model:</h2>

          <p>Step 1: Select the load button</p>

          <div class="center">
            <img src="images/userdocs/image12.png" alt="Load Button" style="width: 100%; max-width: 624px;">
          </div>

          <p>Step 2: Select a <code>.luna</code> file to import your model, which is the preferred format. You can also
            select a <code>.txt</code> file, only if it's formatted exactly like a <code>.luna</code> file (with the
            same structure and data). Otherwise, it may not load correctly.</p>

          <p>Step 3: After loading, your model, equations, and simulation settings will be updated!</p>

          <h2>To export a model as a <code>.luna</code>:</h2>

          <p>Step 1: Build your model and run the simulation, making sure your equations and settings are set how you
            want before exporting.</p>

          <div class="center">
            <img src="images/userdocs/image11.png" alt="Export Model" style="width: 100%; max-width: 624px;">
          </div>

          <p>Step 2: Once you've named your model, click the Export button to save it. If the model isn't named, the
            file will be saved as "luna.txt." If it is named, the file will use that name with the ".luna" extension.
          </p>

          <div class="center">
            <img src="images/userdocs/image14.png" alt="Export Dialog" style="width: 100%; max-width: 624px;">
          </div>

          <h2>To export a model as an image:</h2>

          <p>Step 1: Build your model and run the simulation, making sure your equations and settings are set how you
            want before exporting.</p>
          <p>Step 2: Once you've named your model, click the image button under the select tool to save it. Your model will automatically be saved as a <code>.png</code>.</p>

          <div class="center">
            <img src="images/userdocs/image26.png" alt="Export Model" style="width: 100%; max-width: 624px;">
          </div>


          <h2>To export a chart/table:</h2>

          <p>Step 1: Create a chart/table as per the instructions above.</p>

          <div class="center">
            <img src="images/userdocs/image19.png" alt="Chart/Table Export" style="width: 100%; max-width: 624px;">
          </div>

          <p>Step 2: Press the menu bar to choose what format you want to download your chart/table in. Charts can be
            saved as SVG or PNG files, while tables are saved as CSV files.</p>

          <div class="center">
            <img src="images/userdocs/image1.png" alt="Export Format Options" style="width: 100%; max-width: 624px;">
          </div>

          <p>Now that you've learned the basics, you can start using LunaSim to build models, test ideas, and see how
            systems change over time!</p>
        </section>
      <!-- Video Tutorials Main Section -->
        <section id="video-tutorials" class="section">
          <h1>Video Tutorials</h1>
          <p>If you're feeling unsure about how to use LunaSim or where to begin, these video tutorials are made to help you. They walk through the basics of system dynamics and show how to build and simulate real-world models using LunaSim, from growing deer populations to falling objects, spring motion, and draining water tanks. Each video breaks down some of the main concepts, explains the reasoning behind every step, and helps you connect theory to actual practice. Whether you're new to systems dynamics modeling or just need a refresher, these examples and explanations will help you understand how systems work and how to bring them to life visually, without needing to code. And if you want to challenge yourself, each video includes suggestions for extensions and experiments you can try on your own to further your understanding.</p>
        </section>
        
        <!-- Introduction to LunaSim -->
        <section id="video-intro" class="section">
          <h2>Video 1: Introduction to LunaSim</h2>
          <video controls width="560" style="display:block; margin: 1rem auto;">
            <source src="images/userdocs/video1.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
          <p>This video walks you through how to build and set up a model in LunaSim, step by step. You’ll see how to use important elements like stocks, flows, variables, and influences, and how they all connect to represent real-world systems. While you may have already read about these concepts, watching them come together visually makes everything much easier to understand. The following videos are walkthroughs of actual examples built in LunaSim, so you can see how it all applies in action. Just explore, experiment, and have fun with LunaSim!</p>
        </section>
        
        <!-- Modeling Population Growth with System Dynamics -->
        <section id="video-population" class="section video-population-section">
          <h2>Video 2: Modeling Population Growth with System Dynamics</h2>
          <video controls width="560" style="display:block; margin: 1rem auto;">
            <source src="images/userdocs/video2.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
            <p></p>
          <!-- Place this inside the <section id="video-population" class="section"> under the video and before the closing </section> -->
          <p>
            This video introduces system dynamics using a simple example, modeling how a deer population grows over time. You'll
            learn about stocks, flows, and how change is calculated step by step using Euler’s Method. Once the idea is clear, the
            video shows you exactly how to build the model in LunaSim, from adding variables to connecting influences and writing
            equations. Watching the process unfold helps make sense of the logic, and you'll see how changing the simulation
            settings (like dt) affects the outcome. It’s a hands-on walkthrough to help you understand and build dynamic systems
            yourself.
          </p>
          <p></p>
            <ol>
              <li>Create a stock: <code>deer population</code>, set it to 100</li>
              <li>Add two clouds, one to the left of <code>deer population</code> and one to the right of
                <code>deer population</code>; these represent the birth sink and the death sink, respectively
              </li>
              <li>Add flows:
                <ul>
                  <li><code>births</code> (into population)</li>
                  <li><code>deaths</code> (out of population)</li>
                </ul>
              </li>
              <li>Make both flows unidirectional</li>
              <li>Add variables:
                <ul>
                  <li><code>birth rate = 0.2</code></li>
                  <li><code>death rate = 0.05</code></li>
                </ul>
              </li>
              <li>Add influence arrows:
                <ul>
                  <li><code>deer population → births & deaths</code></li>
                  <li><code>birth/death rate → respective flow</code></li>
                </ul>
              </li>
              <li>Set equations:
                <ul>
                  <li><code>births = birth rate * deer population</code></li>
                  <li><code>deaths = death rate * deer population</code></li>
                </ul>
              </li>
              <li>Run simulation for 20 years, try <code>dt = 1</code>, then <code>dt = 0.1</code></li>
            </ol>

            <div class="center">
            <img src="images/userdocs/2.png" alt="Export Model" style="width: 100%; max-width: 624px;">
          </div>
        
            <h4 style="color:#66b3a4; margin-top:1.5em;">What You'll See:</h4>
            <ul>
              <li>Population grows exponentially from 100</li>
              <li>Births &gt; deaths → continuous growth</li>
              <li>Growth rate ≈ 15% per year</li>
              <li>Population doubles every ~4.6 years</li>
            </ul>
        
            <h4 style="color:#66b3a4; margin-top:1.5em;">Try These Experiments:</h4>
            <ul>
              <li>
                <b>Birth rate:</b>
                <ul>
                  <li><code>0.3</code> = faster growth</li>
                  <li><code>0.1</code> = slower growth</li>
                </ul>
              </li>
              <li>
                <b>Death rate:</b>
                <ul>
                  <li><code>0.1</code> = slower net growth</li>
                  <li><code>0.02</code> = faster net growth</li>
                </ul>
              </li>
              <li>
                <b>Time step (dt):</b>
                <ul>
                  <li>Smaller dt (<code>0.1</code>, <code>0.01</code>) = smoother curves</li>
                </ul>
              </li>
            </ul>
        
            <h4 style="color:#66b3a4; margin-top:1.5em;">Things to Explore:</h4>
            <ul>
              <li>Add carrying capacity</li>
              <li>Model seasonal rates, predators, or disease</li>
            </ul>
          
        </section>
        
        <!-- Simulating Freefall with Air Resistance -->
        <section id="video-freefall" class="section freefall-section">
          <h2>Video 3: Simulating Freefall with Air Resistance</h2>
          <video controls width="560" style="display:block; margin: 1rem auto;">
            <source src="images/userdocs/video3.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
            <p>
            This video teaches physics simulation by modeling an object falling through air. You'll learn how gravity and air resistance create terminal velocity, where forces balance and speed becomes constant. The tutorial walks through building the complete model in LunaSim, showing how position, velocity, and acceleration connect through flows and influences. You'll see how realistic physics emerges from simple relationships, and learn to analyze the results through multiple charts.

          </p>
          <p></p>
          <!-- Place this after the <iframe> in #video-freefall -->
          <ol>
            <li>Create two stocks:
              <ul>
                <li><code>position</code> = 100 (initial height)</li>
                <li><code>velocity</code> = 0 (starts at rest)</li>
              </ul>
            </li>
            <li>Add a flow from a cloud to <code>position</code>:
              <ul>
                <li>name it <code>velocity flow</code></li>
                <li>set equation: <code>- [velocity]</code></li>
                <li>(check "prevent negative" for position)</li>
              </ul>
            </li>
            <li>Add variables:
              <ul>
                <li><code>mass</code> = 1</li>
                <li><code>gravity</code> = 9.8</li>
                <li><code>drag coefficient</code> = 0.5</li>
              </ul>
            </li>
            <li>Add force equations:
              <ul>
                <li><code>gravitational force</code> = <code>[mass] * [gravity]</code></li>
                <li><code>air resistance</code> = <code>- [drag coefficient] * [velocity] * abs([velocity])</code></li>
              </ul>
            </li>
            <li>Add net force and acceleration:
              <ul>
                <li><code>net force</code> = <code>[gravitational force] + [air resistance]</code></li>
                <li><code>acceleration</code> = <code>[net force] / [mass]</code></li>
              </ul>
            </li>
            <li>Create a flow from a cloud to <code>velocity</code>:
              <ul>
                <li>name it <code>acceleration flow</code></li>
                <li>set equation: <code>[acceleration]</code></li>
              </ul>
            </li>
            <li>Add influences:
              <ul>
                <li><code>velocity → velocity flow</code></li>
                <li><code>mass, gravity → gravitational force</code></li>
                <li><code>velocity, drag coefficient → air resistance</code></li>
                <li><code>gravitational force, air resistance → net force</code></li>
                <li><code>net force, mass → acceleration</code></li>
                <li><code>acceleration → acceleration flow</code></li>
              </ul>
            </li>
            <li>Set simulation settings:
              <ul>
                <li>start time: <code>0</code></li>
                <li>end time: <code>10</code></li>
                <li><code>dt</code>: <code>0.01</code></li>
                <li>integration method: <code>RK4</code></li>
              </ul>
            </li>
          </ol>

          <div class="center">
            <img src="images/userdocs/3.png" alt="Export Model" style="width: 100%; max-width: 624px;">
          </div>
          
          <h4 style="color:#66b3a4; margin-top:1.5em;">What You'll See:</h4>
          <ul>
            <li>velocity increases, then levels off around 4.4 m/s (terminal velocity)</li>
            <li>position drops quickly at first, then curves as air resistance builds</li>
            <li>net force approaches zero as gravity and drag balance out</li>
          </ul>
          
          <h4 style="color:#66b3a4; margin-top:1.5em;">Try These Experiments:</h4>
          <ul>
            <li><b>drag coefficient:</b>
              <ul>
                <li><code>0.1</code> = less air resistance → higher terminal velocity</li>
                <li><code>2.0</code> = more air resistance → slower fall (like a parachute)</li>
              </ul>
            </li>
            <li><b>mass:</b>
              <ul>
                <li><code>0.1</code> = slower fall</li>
                <li><code>10</code> = faster fall</li>
              </ul>
            </li>
            <li><b>initial velocity:</b>
              <ul>
                <li><code>5</code> = falling faster right away</li>
                <li><code>5</code> = tossed upward → slows → stops → falls</li>
              </ul>
            </li>
          </ul>
          
          <h4 style="color:#66b3a4; margin-top:1.5em;">Things to Explore:</h4>
          <ul>
            <li>air density that changes with altitude</li>
            <li>horizontal wind force</li>
            <li>bouncing when <code>position = 0</code></li>
          </ul>
        </section>
        
        <!-- Spring Motion and Modeling Oscillations -->
        <section id="video-spring" class="section spring-section">
          <h2>Video 4: Spring Motion and Modeling Oscillations</h2>
          <video controls width="560" style="display:block; margin: 1rem auto;">
            <source src="images/userdocs/video4.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
            <p>
  This video explores a classic oscillatory system: a mass attached to a spring with friction. You’ll learn how LunaSim
  models systems that move back and forth over time, gradually slowing down due to energy loss. The walkthrough shows how
  to represent position and velocity using stocks, calculate forces with Hooke’s law and friction, and connect it all
  using influence arrows and flows. By the end, you’ll see how even simple rules can lead to dynamic, lifelike motion.
  </p>
  <p></p>
  <ol>
    <li>Create two stocks:
      <ul>
        <li><code>position</code>, set it to <code>0.5</code></li>
        <li><code>velocity</code>, set it to <code>0</code></li>
      </ul>
    </li>
    <li>Add flows:
      <ul>
        <li>flow into <code>position</code> called <code>velocity flow</code></li>
        <li>flow into <code>velocity</code> called <code>acceleration flow</code></li>
      </ul>
    </li>
    <li>Set flow equations:
      <ul>
        <li><code>velocity flow = velocity</code></li>
        <li><code>acceleration flow = acceleration</code></li>
      </ul>
    </li>
    <li>Add variables:
      <ul>
        <li><code>mass = 2</code></li>
        <li><code>spring constant = 50</code></li>
        <li><code>friction coefficient = 3</code></li>
      </ul>
    </li>
    <li>Add force variables:
      <ul>
        <li><code>spring force = -spring constant * position</code></li>
        <li><code>friction force = -friction coefficient * velocity</code></li>
      </ul>
    </li>
    <li>Calculate net force and acceleration:
      <ul>
        <li><code>net force = spring force + friction force</code></li>
        <li><code>acceleration = net force / mass</code></li>
      </ul>
    </li>
    <li>Add influence arrows:
      <ul>
        <li><code>velocity → velocity flow</code></li>
        <li><code>position → spring force</code></li>
        <li><code>spring constant → spring force</code></li>
        <li><code>velocity → friction force</code></li>
        <li><code>friction coefficient → friction force</code></li>
        <li><code>spring force → net force</code></li>
        <li><code>friction force → net force</code></li>
        <li><code>net force → acceleration</code></li>
        <li><code>mass → acceleration</code></li>
        <li><code>acceleration → acceleration flow</code></li>
      </ul>
    </li>
    <li>Set simulation settings:
      <ul>
        <li>start time: <code>0</code></li>
        <li>end time: <code>10</code></li>
        <li><code>dt = 0.01</code></li>
        <li>integration method: <code>Runge-Kutta 4</code></li>
      </ul>
    </li>
  </ol>

  <div class="center">
            <img src="images/userdocs/4.png" alt="Export Model" style="width: 100%; max-width: 624px;">
          </div>
  
  <h4 style="color:#66b3a4; margin-top:1.5em;">What You'll See:</h4>
  <ul>
    <li>damped oscillations — motion decreases gradually</li>
    <li>velocity leads position in phase</li>
    <li>spiral shape in phase portrait as energy decreases</li>
    <li>energy graph showing total energy loss over time</li>
  </ul>
  
  <h4 style="color:#66b3a4; margin-top:1.5em;">Make These Charts:</h4>
  <ul>
    <li>position vs time
      <ul>
        <li>x-axis: <code>time</code></li>
        <li>y-axis: <code>position</code></li>
      </ul>
    </li>
    <li>velocity vs time
      <ul>
        <li>x-axis: <code>time</code></li>
        <li>y-axis: <code>velocity</code></li>
      </ul>
    </li>
    <li>phase portrait
      <ul>
        <li>x-axis: <code>position</code></li>
        <li>y-axis: <code>velocity</code></li>
      </ul>
    </li>
    <li>energy graphs
      <ul>
        <li><code>kinetic energy = 0.5 * mass * velocity * velocity</code></li>
        <li><code>potential energy = 0.5 * spring constant * position * position</code></li>
        <li><code>total energy = kinetic energy + potential energy</code></li>
      </ul>
    </li>
  </ul>
  
  <h4 style="color:#66b3a4; margin-top:1.5em;">Try These Experiments:</h4>
  <ul>
    <li>spring constant:
      <ul>
        <li><code>10</code> = slower, softer bounce</li>
        <li><code>200</code> = faster, tighter spring</li>
      </ul>
    </li>
    <li>friction coefficient:
      <ul>
        <li><code>0</code> = no damping, keeps bouncing</li>
        <li><code>10</code> = heavy damping, slows fast</li>
      </ul>
    </li>
    <li>starting conditions:
      <ul>
        <li><code>position = 0</code>, <code>velocity = 2</code></li>
        <li><code>position = 1</code>, <code>velocity = -1</code></li>
      </ul>
    </li>
    <li>add external force:
      <ul>
        <li><code>external force = 5 * Math.sin(2 * Math.PI * 0.8 * time)</code></li>
        <li>update <code>net force = spring force + friction force + external force</code></li>
      </ul>
    </li>
  </ul>
  
  <h4 style="color:#66b3a4; margin-top:1.5em;">Things to Explore:</h4>
  <ul>
    <li>nonlinear spring: <code>-kx - k2x³</code></li>
    <li>two masses and springs (coupled systems)</li>
    <li>driving at natural frequency (resonance!)</li>
    <li>variable friction (dry vs viscous damping)</li>
  </ul>
  
  <h4 style="color:#66b3a4; margin-top:1.5em;">Key Takeaways:</h4>
  <ul>
    <li>this system shows energy loss and oscillatory behavior</li>
    <li>stocks and flows represent how position and velocity evolve</li>
    <li>forces like spring and friction can be modeled directly</li>
    <li>these principles apply to cars, circuits, buildings, instruments, and more</li>
  </ul>
           </section>
        
        <!-- Modeling Flow and Feedback in the Draining Water Tank -->
        <section id="video-tank" class="section water-tank-section">
          <h2>Video 5: Modeling a Conical Water Tank with Rain, Flow, and Evaporation</h2>
          <video controls width="560" style="display:block; margin: 1rem auto;">
            <source src="images/userdocs/video5.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
          <p>This video models a conical water tank with inflow, rain, outflow, and evaporation. Unlike a regular cylindrical tank, the surface area in a cone changes as water fills up—so evaporation and outflow don’t stay constant. Instead, they grow with time. This makes the system nonlinear and dynamic. It’s a perfect example of how LunaSim lets you explore real-world complexity using simple building blocks like stocks, flows, and equations.</p>
          <p></p>
          <p>
            This video walks you through modeling a draining water tank, focusing on flow rates and feedback mechanisms. You'll
            see
            how inflow, rain, outflow, and evaporation interact, and how tank geometry affects the system's dynamics. The tutorial
            covers building the model in LunaSim, setting up variables and equations, and analyzing the results with charts.
          </p>
          <ol>
            <li>Create a stock: <code>water volume = 50</code> (liters)</li>
            <li>Add flows (all uniflow):
              <ul>
                <li>left cloud → <code>inflow</code> → <code>water volume</code></li>
                <li>top cloud (sky) → <code>rain</code> → <code>water volume</code></li>
                <li><code>water volume</code> → <code>outflow</code> → right cloud</li>
                <li><code>water volume</code> → <code>evaporation</code> → upper-right cloud</li>
              </ul>
            </li>
            <li>Create variables:
              <ul>
                <li><code>tank height = 10</code> (m)</li>
                <li><code>base radius = 2</code> (m)</li>
                <li><code>rain rate = 3</code> (L/min)</li>
                <li><code>inflow rate = 8</code> (L/min)</li>
                <li><code>evaporation coefficient = 0.05</code></li>
                <li><code>drain coefficient = 2</code> (L/min per √m)</li>
                <li><code>water height</code> (calculated from volume)</li>
              </ul>
            </li>
            <li>Tank geometry:
              <ul>
                <li>variable: <code>tank area</code></li>
                <li>equation: <code>3.14 * ((base radius / tank height) * water height)^2</code></li>
                <li>area increases as the cone fills → more surface exposed</li>
              </ul>
            </li>
            <li>Calculate water height:
              <ul>
                <li>variable: <code>water height</code></li>
                <li>equation: <code>cbrt((3 * water volume) / (3.14 * base radius^2))</code></li>
                <li>this comes from inverting the volume of a cone</li>
              </ul>
            </li>
            <li>Define outflow & evaporation:
              <ul>
                <li><code>outflow rate = drain coefficient * sqrt(water height)</code> (Torricelli’s law)</li>
                <li><code>evaporation rate = evaporation coefficient * tank area</code></li>
              </ul>
            </li>
            <li>Set equations for flows:
              <ul>
                <li><code>inflow = inflow rate</code></li>
                <li><code>rain = rain rate</code></li>
                <li><code>outflow = outflow rate</code></li>
                <li><code>evaporation = evaporation rate</code></li>
              </ul>
            </li>
            <li>Add influence arrows:
              <ul>
                <li><code>inflow rate → inflow</code></li>
                <li><code>rain rate → rain</code></li>
                <li><code>outflow rate → outflow</code></li>
                <li><code>evaporation rate → evaporation</code></li>
                <li><code>water volume → water height</code></li>
                <li><code>water height → tank area</code></li>
                <li><code>tank area → evaporation rate</code></li>
                <li><code>water height → outflow rate</code></li>
                <li><code>drain coefficient → outflow rate</code></li>
                <li><code>evaporation coefficient → evaporation rate</code></li>
              </ul>
            </li>
            <li>Simulate it:
              <ul>
                <li>start time: <code>0</code></li>
                <li>end time: <code>60</code> (minutes)</li>
                <li><code>dt = 0.1</code></li>
                <li>integration method: <code>Euler</code></li>
              </ul>
            </li>
          </ol>

          <div class="center">
            <img src="images/userdocs/5.png" alt="Export Model" style="width: 100%; max-width: 624px;">
          </div>
          
          <h4 style="color:#66b3a4; margin-top:1.5em;">What You'll See:</h4>
          <ul>
            <li>at first, inflow + rain cause rapid volume growth</li>
            <li>as height increases, area increases → more evaporation</li>
            <li>eventually, the system reaches <b>dynamic equilibrium</b></li>
          </ul>
          
          <h4 style="color:#66b3a4; margin-top:1.5em;">Graph These:</h4>
          <ul>
            <li>water volume vs time</li>
            <li>water height vs time</li>
            <li>inflow, rain, outflow, evaporation vs time</li>
          </ul>
          
          <h4 style="color:#66b3a4; margin-top:1.5em;">Try These Experiments:</h4>
          <ul>
            <li>reduce <code>rain rate</code> to simulate dry weather</li>
            <li>increase <code>evaporation coefficient</code> to simulate a hot sunny day</li>
            <li>lower <code>tank height</code>
              <ul>
                <li>fills faster, less area for evaporation</li>
              </ul>
            </li>
            <li>increase <code>base radius</code>
              <ul>
                <li>wider base = higher area at lower heights</li>
              </ul>
            </li>
          </ul>
          
          <h4 style="color:#66b3a4; margin-top:1.5em;">Key Takeaways:</h4>
          <ul>
            <li>in nonlinear systems, geometry affects how rates evolve</li>
            <li>surface area and pressure depend on volume in dynamic ways</li>
            <li>LunaSim helps visualize how systems reach balance over time</li>
            <li>this kind of model works for anything from real rain tanks to irrigation systems</li>
          </ul>
        </section>  

        <section id="lesson-plans" class="section">
  <h1>Lesson Plans</h1>
  <p>
    This sample curriculum includes three lesson plans for teaching physics and computer science concepts using LunaSim. Designed for high school students (grades 9-12), each lesson takes approximately 45 minutes. The lessons introduce system dynamics modeling, beginning with basic motion, progressing to accelerated motion using Euler’s method, and concluding with nonlinear forces such as air resistance and spring force. Students engage in building, simulating, and analyzing dynamic models to explore physics principles and computational methods.
  </p>
  <a href="lesson 2.html" target="_blank" rel="noopener">access lesson plans here</a>
</section>
      </div>
    </main>
  </div>

  <script>
    // Smooth scrolling and active section highlighting
    const tocLinks = document.querySelectorAll('.toc-link');
    const sections = document.querySelectorAll('.section');

    // Add smooth scrolling
    tocLinks.forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const targetId = link.getAttribute('href').substring(1);
        const targetSection = document.getElementById(targetId);
        if (targetSection) {
          targetSection.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });

    // Highlight active section on scroll
    function updateActiveSection() {
      let current = '';
      sections.forEach(section => {
        const sectionTop = section.offsetTop;
        const sectionHeight = section.clientHeight;
        if (window.scrollY >= (sectionTop - 100)) {
          current = section.getAttribute('id');
        }
      });

      tocLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === `#${current}`) {
          link.classList.add('active');
        }
      });
    }

    window.addEventListener('scroll', updateActiveSection);
    updateActiveSection(); // Initial call
  </script>
</body>

</html>